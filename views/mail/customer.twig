
<h1>Привет! Это информация о вашем заказе!</h2>

<p>Вы можете отслеживать его в <a href="{{ url.to({0:'users/login-user'}, true) }}">вашем персональном кабинете</a>.</p>
{% if app.cart.user.id_emails and app.cart.user.rawPassword %}
    <p>Ваши логин и пароль:
        <br>логин: {{ app.cart.user.emails.email }}
        <br>пароль: {{ app.cart.user.rawPassword }}
    </p>
{% endif %}

{% set productsList = app.cart.getProductsArray() %}

{% set user = app.cart.user %}

<p><strong>Purchased productsList</strong></p>

{% for productsModel in productsList %}
    <p>
        Code: {{ productsModel.code }}</br>
        Name: <a href="{{ url.to({0:'productsModel-detail/index', 'categories':productsModel.categories, 'subcategory':productsModel.subcategory, 'id':productsModel.id}, true) }}">{{ productsModel.name }}</a></br>
        Color: {{ array.map(productsModel.colors, 'id', 'color')[productsModel.colorToCart] }}<br>
        Size: {{ array.map(productsModel.sizes, 'id', 'size')[productsModel.sizeToCart] }}<br>
        Price: {{ (productsModel.price * app.shopUser.currency.exchange_rate) | number_format(2, '.', ' ') }} {{ app.shopUser.currency.currency }}</br>
        Quantity: {{ productsModel.quantity }}<br>
        Total price: {{ ((productsModel.price * app.shopUser.currency.exchange_rate) * productsModel.quantity) | number_format(2, '.', ' ') }} {{ app.shopUser.currency.currency }}
    </p>
{% endfor %}

<p><strong>Customer</strong></p>

<p>
    First Name: {{ user.name }}<br>
    Last Name: {{ user.surname }}<br>
    Email: {{user.emails.email }}<br>
    Phone: {{user.phones.phone }}
</p>

<p><strong>Delivery type</strong></p>

<p>
    {{ array.map(user.deliveries.allDeliveries, 'id', 'name')[user.deliveries.id] }}<br>
    {{ array.map(user.deliveries.allDeliveries, 'id', 'description')[user.deliveries.id] }}<br>
    Cost: {{ (array.map(user.deliveries.allDeliveries, 'id', 'price')[user.deliveries.id] * app.shopUser.currency.exchange_rate) | number_format(2, '.', ' ') }} {{ app.shopUser.currency.currency }}
</p>

<p><strong>Delivery address</strong></p>

<p>
    Country: {{ user.address.country }}<br>
    City: {{ user.address.city }}<br>
    Address: {{ user.address.address }}<br>
    {% if user.address.postcode %}
        Postcode: {{ user.address.postcode }}<br>
    {% endif %}
</p>

<p><strong>Payments</strong></p>

<p>
    {{ array.map(user.payments.allPayments, 'id', 'name')[user.payments.id] }}<br>
    {{ array.map(user.payments.allPayments, 'id', 'description')[user.payments.id] }}
</p

<p><strong>Total cost including delivery: {{ ((app.cart.getTotalCost() + array.map(user.deliveries.allDeliveries, 'id', 'price')[user.deliveries.id]) * app.shopUser.currency.exchange_rate) | number_format(2, '.', ' ') }} {{ app.shopUser.currency.currency }}</strong></p>
