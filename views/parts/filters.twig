
{{ use('yii/widgets/ActiveForm') }}

{% if colorsList and sizesList and brandsList %}

<p><strong>Sorting</strong></p>

{% set form=active_form_begin({'id':'filters-form', 'action':url.to({0:'filter/add-filters'}), 'method':'POST'}) %}
    {{ form.field(filtersModel, 'sortingField').dropDownList({'date':'По дате добавления', 'price':'По цене'}) | raw }}
    {{ form.field(filtersModel, 'sortingType').dropDownList({'SORT_DESC':'По убыванию', 'SORT_ASC':'По возростанию'}) | raw }}
    {{ form.field(filtersModel, 'colors').checkboxList(array.map(colorsList, 'id', 'color')) | raw }}
    {{ form.field(filtersModel, 'sizes').checkboxList(array.map(sizesList, 'id', 'size')) | raw }}
    {{ form.field(filtersModel, 'brands').checkboxList(array.map(brandsList, 'id', 'brand')) | raw }}
    {{ form.field(filtersModel, 'categories').hiddenInput({'value':app.request.get(app.params.categoriesKey)}).label(false) | raw }}
    {{ form.field(filtersModel, 'subcategory').hiddenInput({'value':app.request.get(app.params.subcategoryKey)}).label(false) | raw }}
    {{ form.field(filtersModel, 'search').hiddenInput({'value':app.request.get(app.params.searchKey)}).label(false) | raw }}
    <input type="submit" value="Apply" />
{{ active_form_end() }}

{% set form=active_form_begin({'id':'clean-filters-form', 'action':url.to({0:'filter/clean-filters'}), 'method':'POST'}) %}
    {{ form.field(filtersModel, 'categories').hiddenInput({'value':app.request.get(app.params.categoriesKey)}).label(false) | raw }}
    {{ form.field(filtersModel, 'subcategory').hiddenInput({'value':app.request.get(app.params.subcategoryKey)}).label(false) | raw }}
    {{ form.field(filtersModel, 'search').hiddenInput({'value':app.request.get(app.params.searchKey)}).label(false) | raw }}
    <input type="submit" value="Clean" />
{{ active_form_end() }}

{% endif %}
